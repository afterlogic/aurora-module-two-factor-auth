<div class="popup" style="display: none;">
	<div class="mask"></div>
	<div class="popup_panel" style="max-width: 600px;">
		<span class="close" data-bind="click: cancelPopup"></span>
		<div class="fields">
			<h1 data-bind="i18n: {'key': '%MODULENAME%/HEADING_TWA_VERIFICATION'}"></h1>
			<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_TWA_VERIFICATION'}"></div>
			<h3 data-bind="text: login"></h3>
		</div>

		<div class="fields" data-bind="visible: verificationPassed() && trustDeviceVisible()">
			<label class="custom_checkbox" data-bind="css: {'checked': trustThisBrowser}">
				<span class="icon"></span>
				<input type="checkbox" id="trustThisBrowser" data-bind="checked: trustThisBrowser" />
			</label>
			<label for="trustThisBrowser" data-bind="i18n: {'key': '%MODULENAME%/TRUST_THIS_BROWSER'}"></label>
			<div class="buttons">
				<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_CONTINUE'}, click: afterVerify"></span>
			</div>
		</div>
		
		<div class="fields" data-bind="visible: securityKeyVisible">
			<div style="text-align: center;" data-bind="visible: securityKeyInProgress">
				<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/HINT_SECURITY_KEY_VERIFICATION'}"></div>
				<img src="./static/styles/images/wait.gif" />
			</div>
			
			<!-- ko if: securityKeyError -->
				<h2 data-bind="i18n: {'key': '%MODULENAME%/HEADING_SECURITY_KEY_ERROR_VERIFICATION'}"></h2>
				<!-- ko if: bSecurityKeysNotSupportedError -->
					<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_SECURITY_KEY_ERROR_HTTPS_NEEDED'}, visible: !bIsHttps"></div>
					<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_SECURITY_KEY_ERROR_NOT_SUPPORTED'}, visible: bIsHttps"></div>
				<!-- /ko -->
				<!-- ko if: !bSecurityKeysNotSupportedError -->
					<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_SECURITY_KEY_ERROR_VERIFICATION'}, visible: hasSeveralOptions()"></div>
					<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_SECURITY_KEY_ERROR_VERIFICATION_NO_OTHER_OPTIONS'}, visible: !hasSeveralOptions()"></div>
				<!-- /ko -->

				<div class="buttons">
					<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_TRY_AGAIN'}, click: verifySecurityKey(), visible: !bSecurityKeysNotSupportedError"></span>
					<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CANCEL'}, click: cancelPopup"></span>
				</div>
				<div class="fieldset list-block" style="text-align: right; margin-top: 15px;" data-bind="visible: hasSeveralOptions()">
					<div class="item-content">
						<span class="link" data-bind="i18n: {'key': '%MODULENAME%/ACTION_TRY_ANOTHER_WAY'}, click: useOtherOption"></span>
					</div>
				</div>
			<!-- /ko -->
		</div>
		
		<div class="fields" data-bind="visible: authenticatorAppVisible">
			<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_AUTHENTICATOR_APP_VERIFICATION'}"></div>
			<div class="fieldset list-block">
				<div class="item-content">
					<div data-bind="css: {'item-inner': isMobile(), 'row': !isMobile()}">
						<input class="input" type="text" spellcheck="false"
							   data-bind="value: authenticatorCode, hasFocus: authenticatorCodeFocused, valueUpdate: 'afterkeydown', onEnter: verifyAuthenticatorCode" />
					</div>
				</div>
			</div>
			<div class="buttons">
				<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_VERIFY'}, click: verifyAuthenticatorCode, visible: !authenticatorCodeInProgress()"></span>
				<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_VERIFY_IN_PROGRESS'}, visible: authenticatorCodeInProgress()"></span>
				<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CANCEL'}, click: cancelPopup"></span>
			</div>
			<div class="fieldset list-block" style="text-align: right; margin-top: 15px;" data-bind="visible: hasSeveralOptions">
				<div class="item-content">
					<span class="link" data-bind="i18n: {'key': '%MODULENAME%/ACTION_TRY_ANOTHER_WAY'}, click: useOtherOption"></span>
				</div>
			</div>
		</div>
		
		<div class="fields" data-bind="visible: allOptionsVisible">
			<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_OTHER_VERIFICATION_OPTIONS'}"></div>
			<div class="buttons" data-bind="visible: hasSecurityKey">
				<span class="button contour_button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_USE_SECURITY_KEY'}, click: useSecurityKey" style="display: block;"></span>
			</div>
			<div class="buttons" data-bind="visible: hasAuthenticatorApp">
				<span class="button contour_button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_USE_AUTHENTICATOR_APP'}, click: useAuthenticatorApp" style="display: block;"></span>
			</div>
			<div class="buttons" data-bind="visible: hasBackupCodes">
				<span class="button contour_button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_USE_BACKUP_CODE'}, click: useBackupCodes" style="display: block;"></span>
			</div>
			<div class="buttons">
				<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CANCEL'}, click: cancelPopup"></span>
			</div>
		</div>
		
		<div class="fields" data-bind="visible: backupCodesVisible">
			<div class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_ENTER_BACKUP_CODE'}"></div>
			<div class="fieldset list-block">
				<div class="item-content">
					<div data-bind="css: {'item-inner': isMobile(), 'row': !isMobile()}">
						<input class="input" type="text" spellcheck="false"
							   data-bind="value: backupCode, hasFocus: backupCodeFocus, valueUpdate: 'afterkeydown', onEnter: verifyBackupCode" />
					</div>
				</div>
			</div>
			<div class="buttons">
				<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_VERIFY'}, click: verifyBackupCode, visible: !backupCodeInProgress()"></span>
				<span class="button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_VERIFY_IN_PROGRESS'}, visible: backupCodeInProgress()"></span>
				<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CANCEL'}, click: cancelPopup"></span>
			</div>
			<div class="fieldset list-block" style="text-align: right; margin-top: 15px;" data-bind="visible: hasSeveralOptions">
				<div class="item-content">
					<span class="link" data-bind="i18n: {'key': '%MODULENAME%/ACTION_TRY_ANOTHER_WAY'}, click: useOtherOption"></span>
				</div>
			</div>
		</div>
	</div>
	<span class="helper"></span>
</div>
